---
// src/components/NajalTestimonialsSection.astro
import NajalCard from "@/components/NajalCard.astro";
import NajalCardContent from "@/components/NajalCardContent.astro";
import NajalHeading from "@/components/NajalHeading.astro";
import NajalPatternBackground from "@/components/NajalPatternBackground.astro";
import NajalText from "@/components/NajalText.astro";
import { Icon } from "astro-icon/components";

// Defino el tipo de dato para cada testimonio
interface Testimonial {
  quote: string;
  author: string;
  role: string;
  rating: number;
}

// Defino las props que espera el componente
interface Props {
  testimonials: Testimonial[];
}

// Recibo las props
const { testimonials } = Astro.props;
---
<NajalPatternBackground variant="dark" className="py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <NajalHeading level={2} variant="light" className="mb-4">La opinión de nuestros clientes</NajalHeading>
            <NajalText size="lg" className="text-white/80 max-w-2xl mx-auto">La satisfacción y la confianza son el núcleo de lo que hacemos.</NajalText>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {testimonials.map((testimonial, index) => (
                <NajalCard variant={index === 1 ? "primary" : "default"}>
                    <NajalCardContent>
                        <div class="flex mb-4">
                            {Array(testimonial.rating).fill(0).map(() => (
                                <Icon name="lucide:star" class="h-5 w-5 text-najal-secondary fill-current" />
                            ))}
                        </div>
                        {/* CAMBIO 1: La cita en la card blanca ahora usa un color oscuro estático */}
                        <p class:list={[
                            "mb-6 italic",
                            index === 1 ? 'text-white/90' : 'text-najal-primary-dark/80'
                        ]}>
                            "{testimonial.quote}"
                        </p>
                        <div>
                             <NajalText weight="bold" variant={index === 1 ? 'light' : 'dark'}>{testimonial.author}</NajalText>
                             {/* CAMBIO 2: El rol en la card blanca ahora también usa un color oscuro estático */}
                            <NajalText
                                size="sm"
                                variant={index === 1 ? 'light' : 'dark'}
                                className={index === 1 ? "opacity-70" : "opacity-60"}
                            >
                                {testimonial.role}
                            </NajalText>
                        </div>
                    </NajalCardContent>
                </NajalCard>
            ))}
        </div>
    </div>
</NajalPatternBackground>